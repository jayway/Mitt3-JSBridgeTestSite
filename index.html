<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        body {
            margin-top: 150px;

        }

        body * {
            display: block;
        }
    </style>
    <script>

    // pretend we finish loading AJAX requests after 1500ms
    setTimeout(didFinishLoading, 1500);
    
    function didFinishLoading() {
        if (webkit !== undefined) {
            webkit.messageHandlers.didFinishLoading.postMessage();
        } else {
            window.my3Bridge.didFinishLoading();
        }
    }
    function trackUsabilla() {
        if (webkit !== undefined) {
            webkit.messageHandlers.usabilla.postMessage("fooBar");
        } else {
            window.my3Bridge.trackUsabillaEvent("fooBar");
        }
    }
    function requestPush() {
        if (webkit !== undefined) {
            var msg = { method: "doRequestPushNotifications" }
            webkit.messageHandlers.fooBar.postMessage(JSON.stringify(msg));
        } else {
            window.my3Bridge.doRequestPushNotifications();
        }
        
    }

    window.my3BridgeCallbacks = {
        didReceivePushToken(token) {
            document.getElementById("pushToken").textContent = "Received push token: " + token;
        },
    };


    </script>
</head>
<body>

    <h1>Test Javascript bridge</h1>

    <p id="didFinishLoading"></p>

    <button type="button" onclick="trackUsabilla()">Track Usabilla event</button>

    <button type="button" onclick="requestPush()">Request push notifications</button>

    <p id="pushToken"></p>
</body>
</html>
